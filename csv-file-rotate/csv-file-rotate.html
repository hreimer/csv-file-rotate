
<script type="text/x-red" data-template-name="csv-file-rotate">
    <div class="form-row node-input-filename">
         <label for="node-input-filename"><i class="fa fa-file"></i> <span data-i18n="file.label.filename"></span></label>
         <input id="node-input-filename" type="text">
    </div>
    <div class="form-row node-input-filepath">
        <label for="node-input-filepath"><i class="fa fa-folder"></i> <span data-i18n="file.label.filepath"></span></label>
        <input id="node-input-filepath" type="text">
   </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="file.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]file.label.name">
    </div>
    <div class="form-tips"><span data-i18n="file.tip"></span></div>
</script>

<script type="text/x-red" data-help-name="csv-file-rotate">
    <p>Writes <code>msg.payload</code> to a csv file, rotating daily.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dt class="optional">filepath <span class="property-type">string</span></dt>        
        <dd>If not configured in the msg object (via <i>msg.csvfile.filename</i> and <i>msg.csvfile.path</i>, these optional properties set the name and/or the full path of the file to be written to.</dd>
    </dl>
    <h3>Outputs</h3>
    Provides a debug output to inform about successful/failed file write operations.
    <h3>Details</h3>
    <p>Each message payload for a day will be appended to the specified file, a new file is used every day.</p>
    <p>Define the file name and path and this node takes care of the rest by naming the files according to their local date format (e.g. yyyy-MM-dd).</p>
    

</script>

<script type="text/javascript">
    RED.nodes.registerType('csv-file-rotate',{
        category: 'storage-output',
        defaults: {
            name: {value:""},
            filename: {value:""}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        icon: "file.png",
        align: "right",
        label: function() {
            return this.name||this.filename||this._("file.label.filelabel");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
